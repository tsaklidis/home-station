!function(e){var n={};function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(i,r,function(n){return e[n]}.bind(null,r));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/",t(t.s=0)}([function(e,n,t){e.exports=t(1)},function(e,n,t){"use strict";var i=this&&this.__awaiter||function(e,n,t,i){return new(t||(t=Promise))(function(r,o){function c(e){try{a(i.next(e))}catch(e){o(e)}}function s(e){try{a(i.throw(e))}catch(e){o(e)}}function a(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(c,s)}a((i=i.apply(e,n||[])).next())})};Object.defineProperty(n,"__esModule",{value:!0});const r=t(2),o="//exchange.mediavine.com";var c;!function(e){e.init=({slug:e})=>i(this,void 0,void 0,function*(){window.addEventListener("message",s,!1),f(yield d(e))})}(c=n.Usersync||(n.Usersync={}));const s=e=>{const n=[];if(e.data&&"syncUrls"===e.data.message){r.writeToAll("mv_tokens",e.data.tokens),(e.data.syncUrls||[]).forEach(e=>n.push(a(e)))}};function a({type:e,url:n}){return i(this,void 0,void 0,function*(){return new Promise(t=>{switch(e){case y.iframe:f(n,t);break;case y.pixel:p(n,t);break;case y.script:m(n,t)}})})}function u(e){return i(this,void 0,void 0,function*(){return new Promise((n,t)=>{e("getConsentData","",e=>{e.gdprApplies?n(e.consentData):n("")})})})}function d(e){return i(this,void 0,void 0,function*(){let n=`${o}/usersync/sync?origin=${document.location.origin}&src=${o}&slug=${e}&s2sVersion=sovrnx3-c`;const t=yield r.readAndResolve("mv_tokens");if(t&&t.mv_uuid&&(n=`${n}&mv_uuid=${t.mv_uuid}`),window.__cmp){n+=`&gdpr_consent=${yield u(window.__cmp)}`}return n})}function l(e,n,t,i){let r;n=n||document,r=t?n.getElementsByTagName(t):n.getElementsByTagName("head");try{if((r=r.length?r:n.getElementsByTagName("body")).length){r=r[0];const n=i?null:r.firstChild;return r.insertBefore(e,n)}}catch(e){}}function f(e,n){const t=v(e,!1,"allow-scripts allow-same-origin"),i=document.createElement("div");i.innerHTML=t;const r=i.firstChild;n&&(r.addEventListener("load",n),r.addEventListener("error",n)),l(r,document,"html",!0)}function p(e,n){const t=h(e),i=document.createElement("div");i.innerHTML=t;const r=i.firstChild;n&&(r.addEventListener("load",n),r.addEventListener("error",n)),l(r,document,"html",!0)}function m(e,n){const t=document.createElement("script");t.setAttribute("src",e),n&&(t.addEventListener("load",n),t.addEventListener("error",n)),l(t,document,"html",!0)}function v(e,n=!0,t=""){return e?(n&&(e=encodeURI(e)),t&&(t=`sandbox="${t}"`),`<iframe ${t}"\n      frameborder="0"\n      allowtransparency="true"\n      marginheight="0" marginwidth="0"\n      width="0" hspace="0" vspace="0" height="0"\n      style="height:0px;width:0px;display:none;"\n      scrolling="no"\n      src="${e}">\n    </iframe>`):""}function h(e){if(!e)return"";let n='<div style="position:absolute;left:0px;top:0px;visibility:hidden;">';return n+='<img src="'+encodeURI(e)+'"></div>'}var y;n.createUsersyncElement=a,n.getConsentString=u,n.getUsersyncUrl=d,n.insertElement=l,n.insertUserSyncIframe=f,n.insertUserSyncPixel=p,n.insertScript=m,n.createTrackPixelIframeHtml=v,n.createTrackPixelHtml=h,n.isSafariBrowser=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},n.triggerPixel=function(e){(new Image).src=`${e}&type=pixel`},function(e){e.pixel="pixel",e.iframe="iframe",e.script="script"}(y||(y={})),window.$mediavine=window.$mediavine||{},window.$mediavine.web=window.$mediavine.web||{},window.$mediavine.web.usersyncInit=c.init},function(e,n,t){"use strict";var i=this&&this.__awaiter||function(e,n,t,i){return new(t||(t=Promise))(function(r,o){function c(e){try{a(i.next(e))}catch(e){o(e)}}function s(e){try{a(i.throw(e))}catch(e){o(e)}}function a(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(c,s)}a((i=i.apply(e,n||[])).next())})};Object.defineProperty(n,"__esModule",{value:!0});const r=t(3);n.writeToCache=(e,n)=>i(this,void 0,void 0,function*(){if(!window.caches)return;const t=yield caches.open("mv"),i=new Headers;i.append("Content-Type","application/json"),i.append("Accept","application/json"),i.append("Cache-Control","max-age=31557600"),t.put(e,new Response(JSON.stringify(n),{headers:i}))}),n.readFromCache=e=>i(this,void 0,void 0,function*(){if(!window.caches)return null;const n=yield window.caches.open("mv");if(!n)return null;const t=yield n.match(e);if(!t)return null;if(!t.ok)return null;try{return yield t.json()}catch(e){console.warn(e)}}),n.writeToAll=(e,t)=>i(this,void 0,void 0,function*(){return yield n.writeToCache(e,t),r.set(e,t,{path:"/",expires:365}),!0}),n.readFromAll=e=>i(this,void 0,void 0,function*(){const t={};return t.cache=yield n.readFromCache(e),t.cookie=r.getJSON(e),t}),n.readAndResolve=e=>i(this,void 0,void 0,function*(){const t=yield n.readFromAll(e);return t.cookie&&!t.cache?(n.writeToCache("/mv_tokens",t.cookie),t.cookie):t.cache&&!t.cookie?(r.set("mv_tokens",t.cache),t.cache):t.cache&&t.cookie?t.cookie:null})},function(e,n,t){var i,r;
/*!
 * JavaScript Cookie v2.2.0
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */!function(o){if(void 0===(r="function"==typeof(i=o)?i.call(n,t,n,e):i)||(e.exports=r),!0,e.exports=o(),!!0){var c=window.Cookies,s=window.Cookies=o();s.noConflict=function(){return window.Cookies=c,s}}}(function(){function e(){for(var e=0,n={};e<arguments.length;e++){var t=arguments[e];for(var i in t)n[i]=t[i]}return n}return function n(t){function i(n,r,o){var c;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(o=e({path:"/"},i.defaults,o)).expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*o.expires),o.expires=s}o.expires=o.expires?o.expires.toUTCString():"";try{c=JSON.stringify(r),/^[\{\[]/.test(c)&&(r=c)}catch(e){}r=t.write?t.write(r,n):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),n=(n=(n=encodeURIComponent(String(n))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var a="";for(var u in o)o[u]&&(a+="; "+u,!0!==o[u]&&(a+="="+o[u]));return document.cookie=n+"="+r+a}n||(c={});for(var d=document.cookie?document.cookie.split("; "):[],l=/(%[0-9A-Z]{2})+/g,f=0;f<d.length;f++){var p=d[f].split("="),m=p.slice(1).join("=");this.json||'"'!==m.charAt(0)||(m=m.slice(1,-1));try{var v=p[0].replace(l,decodeURIComponent);if(m=t.read?t.read(m,v):t(m,v)||m.replace(l,decodeURIComponent),this.json)try{m=JSON.parse(m)}catch(e){}if(n===v){c=m;break}n||(c[v]=m)}catch(e){}}return c}}return i.set=i,i.get=function(e){return i.call(i,e)},i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.remove=function(n,t){i(n,"",e(t,{expires:-1}))},i.withConverter=n,i}(function(){})})}]);
//# sourceMappingURL=usersync.min.js.map